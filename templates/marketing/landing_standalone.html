{% extends "marketing/marketing_base.html" %}

{% block title %}Mina — AI Meeting Assistant & Live Transcription{% endblock %}

{% block head_extra %}
<meta name="description" content="Mina captures meetings in real time, turns speech into structured notes and actions, and drafts ready‑to‑send emails and follow‑ups.">
<link rel="canonical" href="/">

<!-- Open Graph / Twitter -->
<meta property="og:type" content="website">
<meta property="og:title" content="Mina — AI Meeting Assistant & Live Transcription">
<meta property="og:description" content="Capture, understand, and act — real-time transcription with action drafting and sharing.">
<meta property="og:image" content="/static/brand/og.png">
<meta property="og:url" content="/">
<meta name="twitter:card" content="summary_large_image">
{% endblock %}

{% block content %}
<!-- Scroll Progress Bar -->
<div class="lp-scroll-progress" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" aria-label="Page scroll progress">
  <div class="lp-scroll-progress-bar" id="lpScrollProgressBar"></div>
</div>

<!-- Mobile Nav Overlay -->
<div class="lp-nav-overlay" id="lpNavOverlay" aria-hidden="true"></div>

<div class="lp-content">
  <!-- Navigation -->
  <nav class="lp-nav" id="lpNav" role="navigation" aria-label="Main navigation">
    <div class="lp-nav-content">
      <a href="/" class="lp-logo">Mina</a>
      
      <!-- Desktop Nav Links -->
      <ul class="lp-nav-links">
        <li><a href="#features">Features</a></li>
        <li><a href="#how">How it works</a></li>
        <li><a href="#pricing">Pricing</a></li>
        <li><a href="#faq">FAQ</a></li>
      </ul>
      
      <!-- Desktop CTA -->
      <a href="/app" class="lp-btn lp-btn-primary lp-nav-desktop-cta">Open the App</a>
      
      <!-- Mobile Menu Toggle -->
      <button class="lp-nav-toggle" id="lpNavToggle" aria-expanded="false" aria-controls="lpNavDrawer" aria-label="Open navigation menu">
        <i data-feather="menu" aria-hidden="true"></i>
      </button>
    </div>
  </nav>

  <!-- Mobile Nav Drawer -->
  <div class="lp-nav-drawer" id="lpNavDrawer" role="dialog" aria-label="Mobile navigation" aria-hidden="true">
    <div class="lp-nav-drawer-header">
      <span class="lp-logo">Mina</span>
      <button class="lp-nav-drawer-close" id="lpNavClose" aria-label="Close navigation menu">
        <i data-feather="x" aria-hidden="true"></i>
      </button>
    </div>
    <nav aria-label="Mobile navigation links">
      <ul class="lp-nav-drawer-links">
        <li><a href="#features">Features</a></li>
        <li><a href="#how">How it works</a></li>
        <li><a href="#pricing">Pricing</a></li>
        <li><a href="#faq">FAQ</a></li>
      </ul>
    </nav>
    <div class="lp-nav-drawer-cta">
      <a href="/app" class="lp-btn lp-btn-primary" style="width: 100%;">Open the App</a>
    </div>
  </div>

  <!-- Hero Section -->
  <section class="lp-hero" aria-labelledby="hero-heading">
    <div class="lp-hero-content">
      <div>
        <h1 id="hero-heading" class="lp-fade-in-up">
          Meetings that 
          <span class="lp-gradient-text">write<br>themselves</span>.
        </h1>
        <p class="lp-fade-in-up delay-1">
          Live transcription that turns into notes, action items, and ready‑to‑send emails. 
          Mina captures what matters and drafts the follow‑ups for you.
        </p>
        <div class="lp-hero-buttons lp-fade-in-up delay-2">
          <a href="/app" class="lp-btn lp-btn-primary lp-btn-lg">
            <i data-feather="mic" aria-hidden="true"></i>
            Try Mina free
          </a>
          <a href="#features" class="lp-btn lp-btn-secondary lp-btn-lg">
            <i data-feather="play" aria-hidden="true"></i>
            See how it works
          </a>
        </div>
        
        <!-- Waitlist Form -->
        <form class="lp-fade-in-up delay-3" id="waitlistForm" style="display: flex; gap: var(--space-4); margin-top: var(--space-8); margin-bottom: var(--space-4);" aria-label="Join waitlist">
          <label for="waitlist-email" class="sr-only">Email address</label>
          <input type="email" id="waitlist-email" name="email" class="lp-input" placeholder="you@company.com" required autocomplete="email" inputmode="email" aria-describedby="waitlist-privacy">
          <button type="submit" class="lp-btn lp-btn-primary" aria-busy="false">Join waitlist</button>
        </form>
        <p id="waitlist-privacy" class="lp-fade-in-up delay-4" style="font-size: var(--text-sm); color: var(--text-muted);">
          No spam. We'll only email important updates.
        </p>
        <!-- Form Status (hidden by default) -->
        <div id="waitlistStatus" class="form-status" role="status" aria-live="polite" aria-atomic="true" style="display: none; margin-top: var(--space-3);"></div>
      </div>
      
      <!-- Step Cards -->
      <div style="display: flex; flex-direction: column; gap: var(--space-6);" class="lp-scale-in">
        <div class="lp-step-card">
          <div class="lp-step-number" aria-hidden="true">1</div>
          <h3 style="font-size: var(--text-xl); font-weight: var(--font-semibold); margin-bottom: var(--space-2);">Dictate.</h3>
          <p style="color: var(--text-secondary); line-height: 1.6;">Speak freely—Mina captures in real time.</p>
        </div>
        <div class="lp-step-card">
          <div class="lp-step-number" aria-hidden="true">2</div>
          <h3 style="font-size: var(--text-xl); font-weight: var(--font-semibold); margin-bottom: var(--space-2);">Understand.</h3>
          <p style="color: var(--text-secondary); line-height: 1.6;">We extract tasks, decisions, and owners.</p>
        </div>
        <div class="lp-step-card">
          <div class="lp-step-number" aria-hidden="true">3</div>
          <h3 style="font-size: var(--text-xl); font-weight: var(--font-semibold); margin-bottom: var(--space-2);">Act.</h3>
          <p style="color: var(--text-secondary); line-height: 1.6;">Draft emails and shareable notes for one‑tap send.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Trust Badges -->
  <section class="lp-trust-badges" aria-label="Trust and security indicators">
    <div class="lp-trust-badge">
      <i data-feather="shield" aria-hidden="true"></i>
      <span>256-bit Encryption</span>
    </div>
    <div class="lp-trust-badge">
      <i data-feather="lock" aria-hidden="true"></i>
      <span>SOC 2 (In Progress)</span>
    </div>
    <div class="lp-trust-badge">
      <i data-feather="check-circle" aria-hidden="true"></i>
      <span>GDPR Compliant</span>
    </div>
    <div class="lp-trust-badge">
      <i data-feather="server" aria-hidden="true"></i>
      <span>99.9% Uptime SLA</span>
    </div>
  </section>

  <!-- Testimonials Section -->
  <section class="lp-section" aria-labelledby="testimonials-heading">
    <div class="lp-section-container">
      <h2 id="testimonials-heading" class="lp-reveal">Trusted by teams</h2>
      <div class="lp-testimonials lp-stagger">
        <div class="lp-testimonial">
          <p class="lp-testimonial-quote">"Mina saves us 3 hours a week. Meeting notes just appear, and the action items are always on point."</p>
          <div class="lp-testimonial-author">
            <div class="lp-testimonial-avatar" aria-hidden="true">SM</div>
            <div class="lp-testimonial-details">
              <h4>Sarah Mitchell</h4>
              <p>Product Manager, TechCorp</p>
            </div>
          </div>
        </div>
        <div class="lp-testimonial">
          <p class="lp-testimonial-quote">"The transcription quality is incredible. We've replaced three different tools with just Mina."</p>
          <div class="lp-testimonial-author">
            <div class="lp-testimonial-avatar" aria-hidden="true">JC</div>
            <div class="lp-testimonial-details">
              <h4>James Chen</h4>
              <p>Engineering Lead, StartupXYZ</p>
            </div>
          </div>
        </div>
        <div class="lp-testimonial">
          <p class="lp-testimonial-quote">"Real-time transcription that actually works. The latency is so low, it feels like magic."</p>
          <div class="lp-testimonial-author">
            <div class="lp-testimonial-avatar" aria-hidden="true">AP</div>
            <div class="lp-testimonial-details">
              <h4>Alex Park</h4>
              <p>Founder, DesignStudio</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Features Section -->
  <section class="lp-section" id="features" aria-labelledby="features-heading">
    <div class="lp-section-container">
      <h2 id="features-heading" class="lp-reveal">Why teams choose Mina</h2>
      <div class="lp-grid lp-stagger">
        <div class="lp-card">
          <div style="margin-bottom: var(--space-4);">
            <i data-feather="mic" style="width: 32px; height: 32px; color: var(--blue-400);" aria-hidden="true"></i>
          </div>
          <h3 style="font-size: var(--text-xl); font-weight: var(--font-semibold); margin-bottom: var(--space-3); color: var(--text-primary);">Live transcription</h3>
          <p style="color: var(--text-secondary); line-height: 1.6;">Low‑latency interim text with final refinement. Meetings, interviews, and dictation.</p>
        </div>
        
        <div class="lp-card">
          <div style="margin-bottom: var(--space-4);">
            <i data-feather="mail" style="width: 32px; height: 32px; color: var(--cyan-400);" aria-hidden="true"></i>
          </div>
          <h3 style="font-size: var(--text-xl); font-weight: var(--font-semibold); margin-bottom: var(--space-3); color: var(--text-primary);">Actions & emails</h3>
          <p style="color: var(--text-secondary); line-height: 1.6;">Turns decisions into drafts—ready to send via your connected email.</p>
        </div>
        
        <div class="lp-card">
          <div style="margin-bottom: var(--space-4);">
            <i data-feather="folder" style="width: 32px; height: 32px; color: var(--purple-400);" aria-hidden="true"></i>
          </div>
          <h3 style="font-size: var(--text-xl); font-weight: var(--font-semibold); margin-bottom: var(--space-3); color: var(--text-primary);">Organized library</h3>
          <p style="color: var(--text-secondary); line-height: 1.6;">Sessions auto‑saved with topics, speakers, and highlights you can search.</p>
        </div>
        
        <div class="lp-card">
          <div style="margin-bottom: var(--space-4);">
            <i data-feather="shield" style="width: 32px; height: 32px; color: var(--green-400);" aria-hidden="true"></i>
          </div>
          <h3 style="font-size: var(--text-xl); font-weight: var(--font-semibold); margin-bottom: var(--space-3); color: var(--text-primary);">Secure by default</h3>
          <p style="color: var(--text-secondary); line-height: 1.6;">Scoped access, encryption at rest, and export controls per session.</p>
        </div>
        
        <div class="lp-card">
          <div style="margin-bottom: var(--space-4);">
            <i data-feather="monitor" style="width: 32px; height: 32px; color: var(--orange-400);" aria-hidden="true"></i>
          </div>
          <h3 style="font-size: var(--text-xl); font-weight: var(--font-semibold); margin-bottom: var(--space-3); color: var(--text-primary);">Works everywhere</h3>
          <p style="color: var(--text-secondary); line-height: 1.6;">Web, mobile browsers, and desktop. No installs required.</p>
        </div>
        
        <div class="lp-card">
          <div style="margin-bottom: var(--space-4);">
            <i data-feather="users" style="width: 32px; height: 32px; color: var(--pink-400);" aria-hidden="true"></i>
          </div>
          <h3 style="font-size: var(--text-xl); font-weight: var(--font-semibold); margin-bottom: var(--space-3); color: var(--text-primary);">Team‑ready</h3>
          <p style="color: var(--text-secondary); line-height: 1.6;">Share sessions, @mention teammates, and track action history.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- How it Works -->
  <section class="lp-section lp-section-alt" id="how" aria-labelledby="how-heading">
    <div class="lp-section-container">
      <h2 id="how-heading" class="lp-reveal">How Mina works</h2>
      <div class="lp-grid lp-stagger">
        <div class="lp-card">
          <div style="width: 48px; height: 48px; border-radius: var(--radius-lg); background: linear-gradient(135deg, var(--blue-500), var(--cyan-400)); display: flex; align-items: center; justify-content: center; margin-bottom: var(--space-4); color: white; font-weight: var(--font-bold); font-size: var(--text-xl);" aria-hidden="true">1</div>
          <h3 style="font-size: var(--text-xl); font-weight: var(--font-semibold); margin-bottom: var(--space-3); color: var(--text-primary);">Capture</h3>
          <p style="color: var(--text-secondary); line-height: 1.6;">Start a live session or upload audio. Mina streams interim text in ~250ms cadence.</p>
        </div>
        
        <div class="lp-card">
          <div style="width: 48px; height: 48px; border-radius: var(--radius-lg); background: linear-gradient(135deg, var(--purple-500), var(--pink-400)); display: flex; align-items: center; justify-content: center; margin-bottom: var(--space-4); color: white; font-weight: var(--font-bold); font-size: var(--text-xl);" aria-hidden="true">2</div>
          <h3 style="font-size: var(--text-xl); font-weight: var(--font-semibold); margin-bottom: var(--space-3); color: var(--text-primary);">Understand</h3>
          <p style="color: var(--text-secondary); line-height: 1.6;">Detects tasks, owners, dates, and decisions from context—no rigid commands.</p>
        </div>
        
        <div class="lp-card">
          <div style="width: 48px; height: 48px; border-radius: var(--radius-lg); background: linear-gradient(135deg, var(--green-500), var(--emerald-400)); display: flex; align-items: center; justify-content: center; margin-bottom: var(--space-4); color: white; font-weight: var(--font-bold); font-size: var(--text-xl);" aria-hidden="true">3</div>
          <h3 style="font-size: var(--text-xl); font-weight: var(--font-semibold); margin-bottom: var(--space-3); color: var(--text-primary);">Draft</h3>
          <p style="color: var(--text-secondary); line-height: 1.6;">Action cards propose emails, notes, and shares. You edit and approve.</p>
        </div>
        
        <div class="lp-card">
          <div style="width: 48px; height: 48px; border-radius: var(--radius-lg); background: linear-gradient(135deg, var(--orange-500), var(--red-400)); display: flex; align-items: center; justify-content: center; margin-bottom: var(--space-4); color: white; font-weight: var(--font-bold); font-size: var(--text-xl);" aria-hidden="true">4</div>
          <h3 style="font-size: var(--text-xl); font-weight: var(--font-semibold); margin-bottom: var(--space-3); color: var(--text-primary);">Send & share</h3>
          <p style="color: var(--text-secondary); line-height: 1.6;">Send via your connected email. Share a secure link with teammates.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Pricing -->
  <section class="lp-section" id="pricing" aria-labelledby="pricing-heading">
    <div class="lp-section-container">
      <h2 id="pricing-heading" class="lp-reveal">Simple pricing</h2>
      <p style="text-align: center; color: var(--text-secondary); margin-bottom: var(--space-16); font-size: var(--text-lg);" class="lp-reveal">Start free. Upgrade as you grow.</p>
      <div class="lp-grid lp-stagger">
        <div class="lp-card" style="text-align: center;">
          <h3 style="font-size: var(--text-2xl); font-weight: var(--font-bold); margin-bottom: var(--space-4); color: var(--text-primary);">Free</h3>
          <div style="font-size: var(--text-5xl); font-weight: var(--font-bold); margin-bottom: var(--space-6); color: var(--text-primary);">
            £0<span style="font-size: var(--text-lg); font-weight: var(--font-normal); color: var(--text-secondary);">/mo</span>
          </div>
          <ul style="list-style: none; padding: 0; margin-bottom: var(--space-8); text-align: left;">
            <li style="padding: var(--space-2) 0; color: var(--text-secondary);"><i data-feather="check" style="width: 20px; height: 20px; color: var(--green-400); vertical-align: middle;" aria-hidden="true"></i> 60 mins / month</li>
            <li style="padding: var(--space-2) 0; color: var(--text-secondary);"><i data-feather="check" style="width: 20px; height: 20px; color: var(--green-400); vertical-align: middle;" aria-hidden="true"></i> Live transcription</li>
            <li style="padding: var(--space-2) 0; color: var(--text-secondary);"><i data-feather="check" style="width: 20px; height: 20px; color: var(--green-400); vertical-align: middle;" aria-hidden="true"></i> Basic exports</li>
          </ul>
          <a href="/app" class="lp-btn lp-btn-primary" style="width: 100%;">Get started</a>
        </div>
        
        <div class="lp-card" style="text-align: center; border-color: var(--blue-500); background: rgba(99, 102, 241, 0.08); transform: scale(1.05);">
          <div style="background: linear-gradient(135deg, var(--blue-500), var(--cyan-400)); color: white; padding: var(--space-2) var(--space-4); border-radius: var(--radius-lg); display: inline-block; margin-bottom: var(--space-4); font-size: var(--text-sm); font-weight: var(--font-semibold);">POPULAR</div>
          <h3 style="font-size: var(--text-2xl); font-weight: var(--font-bold); margin-bottom: var(--space-4); color: var(--text-primary);">Pro</h3>
          <div style="font-size: var(--text-5xl); font-weight: var(--font-bold); margin-bottom: var(--space-6); color: var(--text-primary);">
            £15<span style="font-size: var(--text-lg); font-weight: var(--font-normal); color: var(--text-secondary);">/mo</span>
          </div>
          <ul style="list-style: none; padding: 0; margin-bottom: var(--space-8); text-align: left;">
            <li style="padding: var(--space-2) 0; color: var(--text-secondary);"><i data-feather="check" style="width: 20px; height: 20px; color: var(--green-400); vertical-align: middle;" aria-hidden="true"></i> Unlimited sessions</li>
            <li style="padding: var(--space-2) 0; color: var(--text-secondary);"><i data-feather="check" style="width: 20px; height: 20px; color: var(--green-400); vertical-align: middle;" aria-hidden="true"></i> Action drafting</li>
            <li style="padding: var(--space-2) 0; color: var(--text-secondary);"><i data-feather="check" style="width: 20px; height: 20px; color: var(--green-400); vertical-align: middle;" aria-hidden="true"></i> Team sharing</li>
          </ul>
          <a href="/app" class="lp-btn lp-btn-primary" style="width: 100%;">Upgrade</a>
        </div>
        
        <div class="lp-card" style="text-align: center;">
          <h3 style="font-size: var(--text-2xl); font-weight: var(--font-bold); margin-bottom: var(--space-4); color: var(--text-primary);">Team</h3>
          <div style="font-size: var(--text-5xl); font-weight: var(--font-bold); margin-bottom: var(--space-6); color: var(--text-primary);">Custom</div>
          <ul style="list-style: none; padding: 0; margin-bottom: var(--space-8); text-align: left;">
            <li style="padding: var(--space-2) 0; color: var(--text-secondary);"><i data-feather="check" style="width: 20px; height: 20px; color: var(--green-400); vertical-align: middle;" aria-hidden="true"></i> SAML/SSO</li>
            <li style="padding: var(--space-2) 0; color: var(--text-secondary);"><i data-feather="check" style="width: 20px; height: 20px; color: var(--green-400); vertical-align: middle;" aria-hidden="true"></i> Admin controls</li>
            <li style="padding: var(--space-2) 0; color: var(--text-secondary);"><i data-feather="check" style="width: 20px; height: 20px; color: var(--green-400); vertical-align: middle;" aria-hidden="true"></i> Priority support</li>
          </ul>
          <a href="#contact" class="lp-btn lp-btn-secondary" style="width: 100%;">Contact sales</a>
        </div>
      </div>
    </div>
  </section>

  <!-- FAQ -->
  <section class="lp-section lp-section-alt" id="faq" aria-labelledby="faq-heading">
    <div class="lp-section-container">
      <h2 id="faq-heading" class="lp-reveal">Frequently asked</h2>
      <div style="max-width: 800px; margin: 0 auto; display: flex; flex-direction: column; gap: var(--space-4);" class="lp-stagger">
        <div class="lp-faq-item">
          <button class="lp-faq-button" aria-expanded="false" aria-controls="faq-1">
            <i data-feather="chevron-right" aria-hidden="true"></i>
            <span>How is Mina different?</span>
          </button>
          <div class="lp-faq-answer" id="faq-1">
            Mina doesn't stop at transcription—your follow‑ups are drafted as you speak.
          </div>
        </div>
        
        <div class="lp-faq-item">
          <button class="lp-faq-button" aria-expanded="false" aria-controls="faq-2">
            <i data-feather="chevron-right" aria-hidden="true"></i>
            <span>Is my data private?</span>
          </button>
          <div class="lp-faq-answer" id="faq-2">
            Yes. Scopes per session, encryption at rest, and exports whenever you want.
          </div>
        </div>
        
        <div class="lp-faq-item">
          <button class="lp-faq-button" aria-expanded="false" aria-controls="faq-3">
            <i data-feather="chevron-right" aria-hidden="true"></i>
            <span>Do you support teams?</span>
          </button>
          <div class="lp-faq-answer" id="faq-3">
            Yes—shared sessions, mentions, and admin controls are built‑in.
          </div>
        </div>
        
        <div class="lp-faq-item">
          <button class="lp-faq-button" aria-expanded="false" aria-controls="faq-4">
            <i data-feather="chevron-right" aria-hidden="true"></i>
            <span>Which languages are supported?</span>
          </button>
          <div class="lp-faq-answer" id="faq-4">
            English at launch; more languages on the roadmap.
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Final CTA -->
  <section class="lp-section" aria-labelledby="cta-heading">
    <div class="lp-section-container" style="text-align: center;">
      <h2 id="cta-heading" class="lp-reveal">Join the waitlist</h2>
      <p class="lp-reveal" style="color: var(--text-secondary); margin-bottom: var(--space-8); font-size: var(--text-lg);">
        Be the first to experience Mina. Enter your email to get early access.
      </p>
      <form class="lp-reveal" id="waitlistForm2" style="display: flex; gap: var(--space-4); max-width: 500px; margin: 0 auto;" aria-label="Join waitlist">
        <label for="waitlist-email-2" class="sr-only">Email address</label>
        <input type="email" id="waitlist-email-2" name="email" class="lp-input" placeholder="you@example.com" required autocomplete="email" inputmode="email">
        <button type="submit" class="lp-btn lp-btn-primary" aria-busy="false">Join</button>
      </form>
      <div id="waitlistStatus2" class="form-status" role="status" aria-live="polite" aria-atomic="true" style="display: none; margin-top: var(--space-3);"></div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="lp-footer">
    <div class="lp-section-container">
      <p>© 2025 Mina. All rights reserved.</p>
      <p>
        <a href="/privacy">Privacy</a> • 
        <a href="/terms">Terms</a> • 
        <a href="#top">Back to top</a>
      </p>
    </div>
  </footer>
</div>

<!-- Screen Reader Only Class -->
<style>
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
  }
  
  .form-status {
    padding: var(--space-3) var(--space-4);
    border-radius: var(--radius-lg);
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
  }
  
  .form-status.success {
    background: rgba(16, 185, 129, 0.15);
    border: 1px solid var(--green-400);
    color: var(--green-400);
  }
  
  .form-status.error {
    background: rgba(239, 68, 68, 0.15);
    border: 1px solid var(--red-400);
    color: var(--red-400);
  }
</style>
{% endblock %}

{% block scripts %}
<script>
  // Landing Page Premium Interactions
  class LandingPage {
    constructor() {
      this.init();
    }
    
    init() {
      this.setupScrollProgress();
      this.setupScrollReveal();
      this.setupStaggeredAnimations();
      this.setupSmoothScrolling();
      this.setupNavScroll();
      this.setupMobileNav();
      this.setupFAQ();
      this.setupWaitlistForms();
      this.setupFocusTrap();
    }
    
    // Scroll Progress Bar
    setupScrollProgress() {
      const progressBar = document.getElementById('lpScrollProgressBar');
      const progressContainer = progressBar?.parentElement;
      
      if (!progressBar || !progressContainer) return;
      
      const updateProgress = () => {
        const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
        const docHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
        const scrollPercent = (scrollTop / docHeight) * 100;
        
        progressBar.style.width = `${scrollPercent}%`;
        progressContainer.setAttribute('aria-valuenow', Math.round(scrollPercent));
      };
      
      window.addEventListener('scroll', updateProgress, { passive: true });
      updateProgress();
    }
    
    setupScrollReveal() {
      const observer = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.classList.add('revealed');
          }
        });
      }, {
        threshold: 0.1,
        rootMargin: '0px 0px -100px 0px'
      });
      
      document.querySelectorAll('.lp-reveal').forEach((el) => {
        observer.observe(el);
      });
    }
    
    setupStaggeredAnimations() {
      const staggerObserver = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.classList.add('animate');
          }
        });
      }, {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
      });
      
      document.querySelectorAll('.lp-stagger').forEach((grid) => {
        staggerObserver.observe(grid);
      });
    }
    
    setupSmoothScrolling() {
      document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
          const href = this.getAttribute('href');
          if (href === '#' || href === '#top') {
            e.preventDefault();
            window.scrollTo({ top: 0, behavior: 'smooth' });
            return;
          }
          
          const target = document.querySelector(href);
          if (target) {
            e.preventDefault();
            const headerOffset = 80;
            const elementPosition = target.getBoundingClientRect().top;
            const offsetPosition = elementPosition + window.pageYOffset - headerOffset;
            
            window.scrollTo({
              top: offsetPosition,
              behavior: 'smooth'
            });
            
            // Close mobile nav if open
            this.closeMobileNav();
          }
        }.bind(this));
      });
    }
    
    setupNavScroll() {
      const nav = document.getElementById('lpNav');
      if (!nav) return;
      
      window.addEventListener('scroll', () => {
        if (window.pageYOffset > 50) {
          nav.classList.add('scrolled');
        } else {
          nav.classList.remove('scrolled');
        }
      }, { passive: true });
    }
    
    // Mobile Navigation with Focus Trap
    setupMobileNav() {
      const toggle = document.getElementById('lpNavToggle');
      const drawer = document.getElementById('lpNavDrawer');
      const overlay = document.getElementById('lpNavOverlay');
      const close = document.getElementById('lpNavClose');
      
      if (!toggle || !drawer || !overlay || !close) return;
      
      const openNav = () => {
        drawer.classList.add('open');
        overlay.classList.add('open');
        drawer.setAttribute('aria-hidden', 'false');
        toggle.setAttribute('aria-expanded', 'true');
        document.body.style.overflow = 'hidden';
        
        // Focus first link
        const firstLink = drawer.querySelector('a');
        if (firstLink) firstLink.focus();
      };
      
      this.closeMobileNav = () => {
        drawer.classList.remove('open');
        overlay.classList.remove('open');
        drawer.setAttribute('aria-hidden', 'true');
        toggle.setAttribute('aria-expanded', 'false');
        document.body.style.overflow = '';
        toggle.focus();
      };
      
      toggle.addEventListener('click', openNav);
      close.addEventListener('click', this.closeMobileNav.bind(this));
      overlay.addEventListener('click', this.closeMobileNav.bind(this));
      
      // ESC key to close
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && drawer.classList.contains('open')) {
          this.closeMobileNav();
        }
      });
      
      // Close on nav link click
      drawer.querySelectorAll('a').forEach(link => {
        link.addEventListener('click', this.closeMobileNav.bind(this));
      });
    }
    
    setupFocusTrap() {
      const drawer = document.getElementById('lpNavDrawer');
      if (!drawer) return;
      
      drawer.addEventListener('keydown', (e) => {
        if (e.key !== 'Tab') return;
        if (!drawer.classList.contains('open')) return;
        
        const focusableElements = drawer.querySelectorAll(
          'button, a, input, select, textarea, [tabindex]:not([tabindex="-1"])'
        );
        const firstElement = focusableElements[0];
        const lastElement = focusableElements[focusableElements.length - 1];
        
        if (e.shiftKey && document.activeElement === firstElement) {
          e.preventDefault();
          lastElement.focus();
        } else if (!e.shiftKey && document.activeElement === lastElement) {
          e.preventDefault();
          firstElement.focus();
        }
      });
    }
    
    // FAQ with Accessibility
    setupFAQ() {
      document.querySelectorAll('.lp-faq-button').forEach((button) => {
        button.addEventListener('click', () => {
          const isExpanded = button.getAttribute('aria-expanded') === 'true';
          const answerId = button.getAttribute('aria-controls');
          const answer = document.getElementById(answerId);
          
          if (!answer) return;
          
          // Close all other FAQs
          document.querySelectorAll('.lp-faq-button').forEach((btn) => {
            if (btn !== button) {
              btn.setAttribute('aria-expanded', 'false');
              const id = btn.getAttribute('aria-controls');
              const ans = document.getElementById(id);
              if (ans) ans.classList.remove('open');
            }
          });
          
          // Toggle current FAQ
          button.setAttribute('aria-expanded', !isExpanded);
          if (isExpanded) {
            answer.classList.remove('open');
          } else {
            answer.classList.add('open');
          }
        });
      });
    }
    
    // Waitlist Forms with Loading States
    setupWaitlistForms() {
      const handleSubmit = async (e) => {
        e.preventDefault();
        const form = e.target;
        const formData = new FormData(form);
        const email = formData.get('email');
        const submitBtn = form.querySelector('button[type="submit"]');
        const statusEl = form.nextElementSibling?.classList.contains('form-status') 
          ? form.nextElementSibling 
          : null;
        
        if (!submitBtn) return;
        
        // Set loading state
        submitBtn.setAttribute('aria-busy', 'true');
        submitBtn.disabled = true;
        
        if (statusEl) {
          statusEl.style.display = 'none';
          statusEl.className = 'form-status';
        }
        
        try {
          const response = await fetch('/api/waitlist', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({ email }),
          });
          
          if (response.ok) {
            if (statusEl) {
              statusEl.textContent = 'Thanks for joining! We\'ll be in touch soon.';
              statusEl.classList.add('success');
              statusEl.style.display = 'block';
            }
            form.reset();
          } else {
            throw new Error('Submission failed');
          }
        } catch (error) {
          if (statusEl) {
            statusEl.textContent = 'Something went wrong. Please try again.';
            statusEl.classList.add('error');
            statusEl.style.display = 'block';
          }
        } finally {
          // Reset loading state
          submitBtn.setAttribute('aria-busy', 'false');
          submitBtn.disabled = false;
        }
      };
      
      document.getElementById('waitlistForm')?.addEventListener('submit', handleSubmit);
      document.getElementById('waitlistForm2')?.addEventListener('submit', handleSubmit);
    }
  }
  
  // Initialize when DOM is loaded
  document.addEventListener('DOMContentLoaded', () => {
    new LandingPage();
  });
  
  // Respect reduced motion
  if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
    document.documentElement.style.setProperty('--animation-speed', '0.01ms');
  }
</script>
{% endblock %}
