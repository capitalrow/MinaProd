{% extends "base.html" %}
{% block content %}
<h2>Settings</h2>
<form id="wsForm">
  <label>Workspace Name <input name="name" value="{{ ws.name if ws else 'My Workspace' }}"/></label>
  <label>Retention (days) <input name="retention_days" type="number" value="{{ ws.retention_days if ws else 90 }}"/></label>
  <button type="submit">Save</button>
</form>
<script>
  document.getElementById('wsForm').onsubmit = async (e)=>{
    e.preventDefault();
    const fd = new FormData(e.target);
    const payload = Object.fromEntries(fd.entries());
    await fetch('/api/settings/workspace',{method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(payload)});
    alert('Saved');
  }
</script>
{% endblock %}