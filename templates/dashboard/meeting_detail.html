{% extends "base.html" %}

{% block title %}{{ meeting.title|default('Meeting') }} - Mina{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/transcript.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/ai-insights.css') }}">
<style>
.meeting-detail-container {
    min-height: calc(100vh - var(--header-height));
    padding: var(--space-8) 0;
}

.breadcrumb {
    display: inline-flex;
    align-items: center;
    gap: var(--space-2);
    color: var(--color-primary);
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-medium);
    text-decoration: none;
    margin-bottom: var(--space-4);
    transition: gap var(--transition-base);
    animation: fadeInUp 0.6s ease-out;
}

.breadcrumb:hover {
    gap: var(--space-3);
}

.meeting-header {
    margin-bottom: var(--space-8);
    animation: fadeInUp 0.6s ease-out 0.1s;
    animation-fill-mode: both;
}

.meeting-title-main {
    font-size: var(--font-size-4xl);
    font-weight: var(--font-weight-bold);
    background: var(--gradient-primary);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: var(--space-2);
}

.meeting-meta-info {
    display: flex;
    align-items: center;
    gap: var(--space-4);
    color: var(--color-text-secondary);
    font-size: var(--font-size-base);
    flex-wrap: wrap;
}

.meta-divider {
    width: 4px;
    height: 4px;
    border-radius: 50%;
    background-color: var(--color-text-tertiary);
}

.detail-grid {
    display: grid;
    grid-template-columns: 1fr 320px;
    gap: var(--space-6);
    margin-bottom: var(--space-8);
}

.transcript-card {
    background: var(--glass-bg);
    backdrop-filter: var(--backdrop-blur);
    border: 1px solid var(--glass-border);
    border-radius: var(--radius-2xl);
    padding: var(--space-8);
    margin-bottom: var(--space-6);
    animation: fadeInUp 0.6s ease-out 0.2s;
    animation-fill-mode: both;
    position: relative;
    overflow: hidden;
}

.transcript-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: var(--gradient-primary);
}

.section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-6);
}

.section-title {
    font-size: var(--font-size-xl);
    font-weight: var(--font-weight-semibold);
    color: var(--color-text-primary);
}

.transcript-toolbar {
    display: flex;
    gap: var(--space-2);
}

.transcript-content {
    max-height: 600px;
    overflow-y: auto;
    padding-right: var(--space-2);
}

.transcript-content::-webkit-scrollbar {
    width: 8px;
}

.transcript-content::-webkit-scrollbar-track {
    background: var(--color-surface);
    border-radius: var(--radius-full);
}

.transcript-content::-webkit-scrollbar-thumb {
    background: var(--color-border);
    border-radius: var(--radius-full);
}

.transcript-content::-webkit-scrollbar-thumb:hover {
    background: var(--color-primary);
}

.summary-card {
    background: var(--glass-bg);
    backdrop-filter: var(--backdrop-blur);
    border: 1px solid var(--glass-border);
    border-radius: var(--radius-2xl);
    padding: var(--space-8);
    animation: fadeInUp 0.6s ease-out 0.3s;
    animation-fill-mode: both;
}

.sidebar-card {
    background: var(--glass-bg);
    backdrop-filter: var(--backdrop-blur);
    border: 1px solid var(--glass-border);
    border-radius: var(--radius-xl);
    padding: var(--space-6);
    margin-bottom: var(--space-4);
    animation: fadeInUp 0.6s ease-out;
    animation-fill-mode: both;
}

.sidebar-card:nth-child(1) { animation-delay: 0.2s; }
.sidebar-card:nth-child(2) { animation-delay: 0.3s; }
.sidebar-card:nth-child(3) { animation-delay: 0.4s; }

.card-title {
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-semibold);
    color: var(--color-text-primary);
    margin-bottom: var(--space-4);
}

.task-item {
    display: flex;
    align-items: start;
    gap: var(--space-2);
    padding: var(--space-3);
    border-radius: var(--radius-lg);
    transition: background-color var(--transition-base);
    cursor: pointer;
}

.task-item:hover {
    background-color: var(--color-surface-light);
}

.participant-item {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-2);
    border-radius: var(--radius-lg);
    transition: background-color var(--transition-base);
}

.participant-item:hover {
    background-color: var(--color-surface-light);
}

.participant-avatar {
    width: 36px;
    height: 36px;
    border-radius: var(--radius-full);
    background: var(--gradient-primary);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-weight: var(--font-weight-semibold);
    font-size: var(--font-size-sm);
}

.empty-message {
    text-align: center;
    padding: var(--space-8);
    color: var(--color-text-tertiary);
    font-size: var(--font-size-sm);
}

.action-buttons {
    display: flex;
    gap: var(--space-3);
    margin-top: var(--space-4);
    flex-wrap: wrap;
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@media (max-width: 1024px) {
    .detail-grid {
        grid-template-columns: 1fr;
    }
    
    .meeting-title-main {
        font-size: var(--font-size-3xl);
    }
}
</style>
{% endblock %}

{% block content %}
<div class="container meeting-detail-container">
    <a href="{{ url_for('dashboard.meetings') }}" class="breadcrumb">
        <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
        </svg>
        Back to Meetings
    </a>
    
    <div class="meeting-header">
        <h1 class="meeting-title-main">{{ meeting.title|default('Meeting Details') }}</h1>
        <div class="meeting-meta-info">
            <span>{{ meeting.created_at.strftime('%B %d, %Y at %I:%M %p') if meeting.created_at else 'No date' }}</span>
            {% if meeting.duration %}
            <span class="meta-divider"></span>
            <span>{{ (meeting.duration / 60)|round|int }} minutes</span>
            {% endif %}
            {% if meeting.speaker_count %}
            <span class="meta-divider"></span>
            <span>{{ meeting.speaker_count }} speakers</span>
            {% endif %}
        </div>
    </div>

    <div class="detail-grid">
        <div>
            <div class="transcript-enhanced">
                <div class="transcript-header">
                    <h2 class="transcript-title">Transcript</h2>
                    <div class="transcript-search">
                        <svg class="transcript-search-icon" width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                        </svg>
                        <input 
                            type="text" 
                            class="transcript-search-input" 
                            id="transcript-search"
                            placeholder="Search transcript... (Ctrl+F)"
                        >
                        <span class="transcript-search-results" id="search-results"></span>
                    </div>
                    <div class="transcript-actions">
                        <button id="search-prev" class="btn-icon" title="Previous result">
                            <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                            </svg>
                        </button>
                        <button id="search-next" class="btn-icon" title="Next result">
                            <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                            </svg>
                        </button>
                    </div>
                </div>
                
                <div class="transcript-toolbar">
                    <div class="toolbar-left">
                        <button class="toolbar-button" onclick="window.transcriptManager.copyEntireTranscript()" title="Copy entire transcript">
                            <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/>
                            </svg>
                            Copy All
                        </button>
                        <button class="toolbar-button" onclick="document.getElementById('exportModal').style.display='flex'" title="Export transcript">
                            <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/>
                            </svg>
                            Export
                        </button>
                    </div>
                    <div class="toolbar-right">
                        <button class="toolbar-button" onclick="window.transcriptManager.showKeyboardShortcuts()" title="Keyboard shortcuts">
                            <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                            Shortcuts
                        </button>
                    </div>
                </div>
                
                {% if segments and segments|length > 0 %}
                <div class="speaker-legend" id="speaker-legend"></div>
                
                <div class="transcript-content">
                    {% for segment in segments %}
                    <div class="transcript-segment" 
                         data-segment-id="{{ segment.id }}"
                         data-speaker="{{ segment.speaker_name or segment.speaker_id or 'Speaker' }}"
                         data-timestamp="{{ segment.start_time_formatted or '' }}"
                         data-confidence="{{ segment.avg_confidence or 0 }}">
                        <div class="segment-header">
                            <div class="segment-speaker">
                                <div class="speaker-avatar">
                                    {{ (segment.speaker_name or segment.speaker_id or 'Speaker')[0]|upper }}
                                </div>
                                <span class="speaker-name-editable">{{ segment.speaker_name or segment.speaker_id or 'Speaker' }}</span>
                            </div>
                            <span class="segment-timestamp">{{ segment.start_time_formatted or '' }}</span>
                            {% if segment.avg_confidence %}
                            <span class="segment-confidence">
                                <span class="confidence-indicator {% if segment.avg_confidence > 0.8 %}confidence-high{% elif segment.avg_confidence > 0.6 %}confidence-medium{% else %}confidence-low{% endif %}"></span>
                                {{ (segment.avg_confidence * 100)|round|int }}%
                            </span>
                            {% endif %}
                        </div>
                        <div class="segment-text editable">{{ segment.text }}</div>
                        <div class="segment-actions">
                            <button class="segment-action-btn" onclick="window.transcriptManager.copySegment('{{ segment.id }}')" title="Copy segment">
                                <svg width="14" height="14" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                {% else %}
                <div class="empty-message" style="padding: var(--space-12);">
                    <svg width="64" height="64" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="margin: 0 auto var(--space-4); opacity: 0.3;">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                    </svg>
                    <h3 style="font-size: var(--font-size-lg); font-weight: var(--font-weight-semibold); color: var(--color-text-primary); margin-bottom: var(--space-2);">
                        No Transcript Available
                    </h3>
                    <p style="color: var(--color-text-tertiary); max-width: 320px; margin: 0 auto;">
                        This meeting doesn't have a transcript yet. Start a live transcription session to generate one.
                    </p>
                </div>
                {% endif %}
            </div>
            
            <!-- Export Modal -->
            <div id="exportModal" class="modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.7); z-index: 9998; align-items: center; justify-content: center;">
                <div class="export-modal-content" style="background: var(--glass-bg); backdrop-filter: var(--backdrop-blur); border: 1px solid var(--glass-border); border-radius: var(--radius-2xl); max-width: 600px; width: 90%;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--space-4);">
                        <h3 style="font-size: var(--font-size-xl); font-weight: var(--font-weight-bold); background: var(--gradient-primary); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">
                            Export Transcript
                        </h3>
                        <button class="btn-icon" onclick="document.getElementById('exportModal').style.display='none'">
                            <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                            </svg>
                        </button>
                    </div>
                    <p style="color: var(--color-text-secondary); margin-bottom: var(--space-4);">Choose a format to export your meeting transcript:</p>
                    <div class="export-options">
                        <a href="/api/meetings/{{ meeting.id }}/export/txt" class="export-option">
                            <div class="export-option-icon">
                                <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                                </svg>
                            </div>
                            <span class="export-option-label">TXT</span>
                            <span class="export-option-desc">Plain text file</span>
                        </a>
                        <a href="/api/meetings/{{ meeting.id }}/export/docx" class="export-option">
                            <div class="export-option-icon">
                                <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                                </svg>
                            </div>
                            <span class="export-option-label">DOCX</span>
                            <span class="export-option-desc">Word document</span>
                        </a>
                        <a href="/api/meetings/{{ meeting.id }}/export/pdf" class="export-option">
                            <div class="export-option-icon">
                                <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"/>
                                </svg>
                            </div>
                            <span class="export-option-label">PDF</span>
                            <span class="export-option-desc">PDF document</span>
                        </a>
                        <a href="/api/meetings/{{ meeting.id }}/export/json" class="export-option">
                            <div class="export-option-icon">
                                <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"/>
                                </svg>
                            </div>
                            <span class="export-option-label">JSON</span>
                            <span class="export-option-desc">Structured data</span>
                        </a>
                    </div>
                </div>
            </div>

            <!-- AI Insights Panel -->
            <div class="ai-insights-panel" data-meeting-id="{{ meeting.id }}">
                <div class="ai-insights-header">
                    <div class="ai-insights-title">
                        <i class="fas fa-brain"></i>
                        <span>AI Insights</span>
                    </div>
                    <div class="ai-insights-actions">
                        <button data-action="refresh-insights">
                            <i class="fas fa-sync-alt"></i> Refresh
                        </button>
                        <button data-action="cost-estimate">
                            <i class="fas fa-coins"></i> Cost
                        </button>
                    </div>
                </div>

                <!-- Tabs Navigation -->
                <div class="ai-insights-tabs">
                    <button class="ai-insights-tab active" data-tab="summary">
                        <i class="fas fa-file-alt"></i> Summary
                    </button>
                    <button class="ai-insights-tab" data-tab="key-points">
                        <i class="fas fa-list-ul"></i> Key Points
                    </button>
                    <button class="ai-insights-tab" data-tab="action-items">
                        <i class="fas fa-tasks"></i> Actions
                    </button>
                    <button class="ai-insights-tab" data-tab="questions">
                        <i class="fas fa-question-circle"></i> Questions
                    </button>
                    <button class="ai-insights-tab" data-tab="decisions">
                        <i class="fas fa-gavel"></i> Decisions
                    </button>
                    <button class="ai-insights-tab" data-tab="sentiment">
                        <i class="fas fa-smile"></i> Sentiment
                    </button>
                    <button class="ai-insights-tab" data-tab="topics">
                        <i class="fas fa-tags"></i> Topics
                    </button>
                    <button class="ai-insights-tab" data-tab="custom">
                        <i class="fas fa-magic"></i> Custom
                    </button>
                </div>

                <!-- Tab Contents -->
                <div class="ai-insights-content" data-tab="summary" style="display: block;"></div>
                <div class="ai-insights-content" data-tab="key-points" style="display: none;"></div>
                <div class="ai-insights-content" data-tab="action-items" style="display: none;"></div>
                <div class="ai-insights-content" data-tab="questions" style="display: none;"></div>
                <div class="ai-insights-content" data-tab="decisions" style="display: none;"></div>
                <div class="ai-insights-content" data-tab="sentiment" style="display: none;"></div>
                <div class="ai-insights-content" data-tab="topics" style="display: none;"></div>
                <div class="ai-insights-content" data-tab="custom" style="display: none;">
                    <form class="ai-custom-prompt-form">
                        <textarea class="ai-custom-prompt-textarea" placeholder="Enter your custom analysis prompt..."></textarea>
                        <div class="ai-custom-prompt-templates">
                            <button type="button" class="ai-prompt-template-btn" data-template="risks">üîç Identify Risks</button>
                            <button type="button" class="ai-prompt-template-btn" data-template="followup">üìÖ Follow-up Actions</button>
                            <button type="button" class="ai-prompt-template-btn" data-template="stakeholders">üë• Stakeholders</button>
                            <button type="button" class="ai-prompt-template-btn" data-template="timeline">‚è±Ô∏è Timeline</button>
                            <button type="button" class="ai-prompt-template-btn" data-template="budget">üí∞ Budget Discussion</button>
                        </div>
                        <button type="submit" class="ai-custom-prompt-submit">
                            <i class="fas fa-sparkles"></i> Analyze
                        </button>
                    </form>
                </div>
            </div>

            {% if meeting.summary %}
            <div class="summary-card">
                <h2 class="section-title" style="margin-bottom: var(--space-4);">Summary</h2>
                <div style="color: var(--color-text-secondary); line-height: var(--line-height-relaxed);">
                    {{ meeting.summary|safe }}
                </div>
            </div>
            {% endif %}
        </div>

        <div>
            <div class="sidebar-card">
                <h3 class="card-title">Action Items</h3>
                {% if meeting.tasks and meeting.tasks|length > 0 %}
                <div style="display: flex; flex-direction: column; gap: var(--space-2);">
                    {% for task in meeting.tasks %}
                    <label class="task-item">
                        <input type="checkbox" {% if task.completed %}checked{% endif %} class="checkbox" style="margin-top: 2px;">
                        <span style="font-size: var(--font-size-sm); color: var(--color-text-primary);">{{ task.description }}</span>
                    </label>
                    {% endfor %}
                </div>
                <div class="action-buttons">
                    <button class="btn btn-secondary btn-sm">Add Task</button>
                </div>
                {% else %}
                <div class="empty-message">
                    <svg width="32" height="32" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="margin: 0 auto var(--space-3); opacity: 0.5;">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/>
                    </svg>
                    <p>No action items</p>
                </div>
                {% endif %}
            </div>

            <div class="sidebar-card">
                <h3 class="card-title">Participants</h3>
                {% if meeting.participants and meeting.participants|length > 0 %}
                <div style="display: flex; flex-direction: column; gap: var(--space-2);">
                    {% for participant in meeting.participants %}
                    <div class="participant-item">
                        <div class="participant-avatar">{{ participant.name[0]|upper }}</div>
                        <span style="font-size: var(--font-size-sm); color: var(--color-text-primary);">{{ participant.name }}</span>
                    </div>
                    {% endfor %}
                </div>
                {% else %}
                <div class="empty-message">
                    <svg width="32" height="32" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="margin: 0 auto var(--space-3); opacity: 0.5;">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/>
                    </svg>
                    <p>No participants</p>
                </div>
                {% endif %}
            </div>

            <div class="sidebar-card">
                <h3 class="card-title">Actions</h3>
                <div style="display: flex; flex-direction: column; gap: var(--space-2);">
                    <button class="btn btn-secondary btn-sm">
                        <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"/>
                        </svg>
                        Share Meeting
                    </button>
                    <button class="btn btn-secondary btn-sm">
                        <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/>
                        </svg>
                        Export
                    </button>
                    <button class="btn btn-secondary btn-sm">
                        <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/>
                        </svg>
                        Edit Details
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<script nonce="{{ g.csp_nonce }}">
    // Set meeting ID for TranscriptManager
    document.body.dataset.meetingId = '{{ meeting.id }}';
</script>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/transcript.js') }}"></script>
<script src="{{ url_for('static', filename='js/ai-insights.js') }}"></script>
{% endblock %}
