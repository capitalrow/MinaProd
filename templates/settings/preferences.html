{% extends "base.html" %}

{% block title %}Preferences - Mina{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/settings.css') }}">
{% endblock %}

{% block content %}
<div class="container settings-container">
    <!-- Header -->
    <div class="settings-header">
        <h1 class="settings-title">Settings</h1>
        <p class="settings-subtitle">Manage your account and preferences</p>
    </div>

    <!-- Tabs -->
    <div class="settings-tabs">
        <nav class="settings-tabs-nav">
            <a href="{{ url_for('settings.preferences') }}" class="tab-link active">Preferences</a>
            <a href="{{ url_for('settings.integrations') }}" class="tab-link">Integrations</a>
            <a href="{{ url_for('settings.profile') }}" class="tab-link">Profile</a>
            <a href="{{ url_for('settings.workspace_management') }}" class="tab-link">Workspace</a>
        </nav>
    </div>

    <div class="settings-content">
        <!-- Notification Settings -->
        <div class="settings-card">
            <h2 class="settings-card-title">Notification Settings</h2>
            <form method="POST" action="{{ url_for('settings.update_preferences') }}">
                <div class="form-group">
                    <label class="form-checkbox-label">
                        <input type="checkbox" name="email_notifications" checked class="form-checkbox">
                        <div class="checkbox-content">
                            <p class="checkbox-title">Email Notifications</p>
                            <p class="checkbox-description">Receive email updates about your meetings</p>
                        </div>
                    </label>
                    
                    <label class="form-checkbox-label">
                        <input type="checkbox" name="meeting_reminders" checked class="form-checkbox">
                        <div class="checkbox-content">
                            <p class="checkbox-title">Meeting Reminders</p>
                            <p class="checkbox-description">Get reminders before scheduled meetings</p>
                        </div>
                    </label>
                    
                    <label class="form-checkbox-label">
                        <input type="checkbox" name="task_updates" checked class="form-checkbox">
                        <div class="checkbox-content">
                            <p class="checkbox-title">Task Updates</p>
                            <p class="checkbox-description">Notifications when tasks are updated</p>
                        </div>
                    </label>

                    <label class="form-checkbox-label">
                        <input type="checkbox" name="insight_notifications" checked class="form-checkbox">
                        <div class="checkbox-content">
                            <p class="checkbox-title">AI Insights Ready</p>
                            <p class="checkbox-description">Notify when meeting summaries and action items are generated</p>
                        </div>
                    </label>
                </div>
                
                <div style="margin-top: var(--space-6);">
                    <button type="submit" class="btn btn-primary">Save Preferences</button>
                </div>
            </form>
        </div>

        <!-- Transcription Controls -->
        <div class="settings-card">
            <h2 class="settings-card-title">Transcription Controls</h2>
            <form method="POST" action="{{ url_for('settings.update_preferences') }}">
                <div class="form-group">
                    <div>
                        <label class="form-label">Default Language</label>
                        <select name="default_language" class="form-select">
                            <option value="en" selected>English</option>
                            <option value="es">Spanish</option>
                            <option value="fr">French</option>
                            <option value="de">German</option>
                            <option value="zh">Chinese</option>
                            <option value="ja">Japanese</option>
                            <option value="pt">Portuguese</option>
                        </select>
                    </div>

                    <div>
                        <label class="form-label">Transcription Mode</label>
                        <select name="transcription_mode" class="form-select">
                            <option value="realtime" selected>Real-time (faster, less accurate)</option>
                            <option value="accurate">Post-processed (slower, more accurate)</option>
                            <option value="hybrid">Hybrid (real-time + refinement)</option>
                        </select>
                    </div>
                    
                    <label class="form-checkbox-label">
                        <input type="checkbox" name="speaker_diarization" checked class="form-checkbox">
                        <div class="checkbox-content">
                            <p class="checkbox-title">Speaker Diarization</p>
                            <p class="checkbox-description">Automatically detect and label different speakers</p>
                        </div>
                    </label>

                    <label class="form-checkbox-label">
                        <input type="checkbox" name="profanity_filter" class="form-checkbox">
                        <div class="checkbox-content">
                            <p class="checkbox-title">Profanity Filter</p>
                            <p class="checkbox-description">Automatically filter profane language in transcripts</p>
                        </div>
                    </label>

                    <label class="form-checkbox-label">
                        <input type="checkbox" name="auto_punctuation" checked class="form-checkbox">
                        <div class="checkbox-content">
                            <p class="checkbox-title">Auto Punctuation</p>
                            <p class="checkbox-description">Automatically add punctuation and capitalization</p>
                        </div>
                    </label>
                </div>
                <div style="margin-top: var(--space-6);">
                    <button type="submit" class="btn btn-primary">Save Transcription Settings</button>
                </div>
            </form>
        </div>

        <!-- Privacy & Compliance -->
        <div class="settings-card">
            <h2 class="settings-card-title">Privacy & Compliance</h2>
            <form method="POST" action="{{ url_for('settings.update_preferences') }}">
                <div class="form-group">
                    <div>
                        <label class="form-label">Data Retention Period</label>
                        <select name="data_retention" class="form-select">
                            <option value="30">30 days</option>
                            <option value="90" selected>90 days</option>
                            <option value="365">1 year</option>
                            <option value="forever">Forever</option>
                        </select>
                        <p class="form-help">Recordings and transcripts will be automatically deleted after this period</p>
                    </div>

                    <div>
                        <label class="form-label">Recording Consent</label>
                        <select name="recording_consent" class="form-select">
                            <option value="always">Always ask for consent</option>
                            <option value="auto" selected>Auto-consent (default on)</option>
                            <option value="custom">Custom consent message</option>
                        </select>
                    </div>

                    <label class="form-checkbox-label">
                        <input type="checkbox" name="auto_redaction" class="form-checkbox">
                        <div class="checkbox-content">
                            <p class="checkbox-title">Auto-redact PII</p>
                            <p class="checkbox-description">Automatically mask emails, phone numbers, and credit card numbers</p>
                        </div>
                    </label>

                    <div>
                        <label class="form-label">Default Meeting Access</label>
                        <select name="meeting_access" class="form-select">
                            <option value="workspace" selected>Workspace only</option>
                            <option value="team">Specific teams</option>
                            <option value="private">Private (only me)</option>
                            <option value="public">Public link</option>
                        </select>
                    </div>
                </div>
                <div style="margin-top: var(--space-6);">
                    <button type="submit" class="btn btn-primary">Save Privacy Settings</button>
                </div>
            </form>
        </div>

        <!-- AI Insights Configuration -->
        <div class="settings-card">
            <h2 class="settings-card-title">AI Insights Configuration</h2>
            <form method="POST" action="{{ url_for('settings.update_preferences') }}">
                <div class="form-group">
                    <div>
                        <label class="form-label">Auto-generate Summaries</label>
                        <select name="auto_summary" class="form-select">
                            <option value="immediate" selected>Immediately after meeting</option>
                            <option value="hourly">Within 1 hour</option>
                            <option value="daily">Daily batch</option>
                            <option value="manual">Manual only</option>
                        </select>
                    </div>

                    <div>
                        <label class="form-label">Action Item Detection</label>
                        <select name="action_detection" class="form-select">
                            <option value="low">Low sensitivity (fewer items)</option>
                            <option value="medium" selected>Medium sensitivity</option>
                            <option value="high">High sensitivity (more items)</option>
                        </select>
                    </div>

                    <label class="form-checkbox-label">
                        <input type="checkbox" name="auto_detect_decisions" checked class="form-checkbox">
                        <div class="checkbox-content">
                            <p class="checkbox-title">Auto-detect Decisions</p>
                            <p class="checkbox-description">Identify and highlight key decisions made during meetings</p>
                        </div>
                    </label>

                    <label class="form-checkbox-label">
                        <input type="checkbox" name="sentiment_analysis" class="form-checkbox">
                        <div class="checkbox-content">
                            <p class="checkbox-title">Sentiment Analysis</p>
                            <p class="checkbox-description">Analyze emotional tone and engagement levels</p>
                        </div>
                    </label>

                    <label class="form-checkbox-label">
                        <input type="checkbox" name="auto_create_tasks" class="form-checkbox">
                        <div class="checkbox-content">
                            <p class="checkbox-title">Auto-create Tasks</p>
                            <p class="checkbox-description">Automatically create tasks from detected action items</p>
                        </div>
                    </label>
                </div>
                <div style="margin-top: var(--space-6);">
                    <button type="submit" class="btn btn-primary">Save AI Settings</button>
                </div>
            </form>
        </div>

        <!-- Audio & Recording -->
        <div class="settings-card">
            <h2 class="settings-card-title">Audio & Recording</h2>
            <form method="POST" action="{{ url_for('settings.update_preferences') }}">
                <div class="form-group">
                    <div>
                        <label class="form-label">Audio Quality</label>
                        <select name="audio_quality" class="form-select">
                            <option value="high">High Quality (48kHz)</option>
                            <option value="standard" selected>Standard (44.1kHz)</option>
                            <option value="low">Low Bandwidth (22kHz)</option>
                        </select>
                    </div>

                    <div>
                        <label class="form-label">Noise Cancellation</label>
                        <select name="noise_cancellation" class="form-select">
                            <option value="aggressive">Aggressive (remove all background noise)</option>
                            <option value="moderate" selected>Moderate (balanced)</option>
                            <option value="off">Off (preserve original audio)</option>
                        </select>
                    </div>
                    
                    <label class="form-checkbox-label">
                        <input type="checkbox" name="auto_save" checked class="form-checkbox">
                        <div class="checkbox-content">
                            <p class="checkbox-title">Auto-save recordings</p>
                            <p class="checkbox-description">Automatically save recordings to cloud storage</p>
                        </div>
                    </label>

                    <label class="form-checkbox-label">
                        <input type="checkbox" name="auto_start_recording" class="form-checkbox">
                        <div class="checkbox-content">
                            <p class="checkbox-title">Auto-start Recording</p>
                            <p class="checkbox-description">Automatically start recording when you join a meeting</p>
                        </div>
                    </label>
                </div>
                <div style="margin-top: var(--space-6);">
                    <button type="submit" class="btn btn-primary">Save Audio Settings</button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}
