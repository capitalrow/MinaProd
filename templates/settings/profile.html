{% extends "base.html" %}

{% block title %}Profile - Mina{% endblock %}

{% block content %}
<div class="container" style="padding-top: var(--space-8); padding-bottom: var(--space-8); max-width: 1200px;">
    <div class="mb-8">
        <h1 class="text-4xl font-bold mb-2">Settings</h1>
        <p class="text-secondary">Manage your account and preferences</p>
    </div>

    <div class="mb-6" style="border-bottom: 1px solid var(--color-border);">
        <nav style="display: flex; gap: var(--space-6);">
            <a href="{{ url_for('settings.preferences') }}" class="tab-link" style="padding: var(--space-3) 0; color: var(--color-text-secondary); transition: color 0.2s;">
                Preferences
            </a>
            <a href="{{ url_for('settings.integrations') }}" class="tab-link" style="padding: var(--space-3) 0; color: var(--color-text-secondary); transition: color 0.2s;">
                Integrations
            </a>
            <a href="{{ url_for('settings.profile') }}" class="tab-link active" style="padding: var(--space-3) 0; border-bottom: 2px solid var(--color-primary); font-medium; color: var(--color-primary);">
                Profile
            </a>
            <a href="{{ url_for('settings.workspace_management') }}" class="tab-link" style="padding: var(--space-3) 0; color: var(--color-text-secondary); transition: color 0.2s;">
                Workspace
            </a>
        </nav>
    </div>

    <div style="max-width: 800px;">

    <div class="card" style="margin-bottom: var(--space-6);">
        <h2 class="text-xl font-semibold mb-4">Personal Information</h2>
        <form method="POST">
            <div style="display: flex; flex-direction: column; gap: var(--space-4);">
                <div>
                    <label class="block text-sm font-medium mb-2">Profile Picture</label>
                    <div style="display: flex; align-items: center; gap: var(--space-4);">
                        <div style="width: 80px; height: 80px; border-radius: 50%; background: linear-gradient(135deg, var(--color-primary) 0%, #9333ea 100%); display: flex; align-items: center; justify-content: center; color: white; font-size: 32px; font-weight: 600;">
                            {{ user.username[0].upper() if user.username else 'U' }}
                        </div>
                        <div>
                            <button type="button" class="btn btn-sm btn-ghost" onclick="document.getElementById('avatar-upload').click()">Change Photo</button>
                            <input type="file" id="avatar-upload" name="avatar" accept="image/*" style="display: none;">
                            <p class="text-xs text-secondary mt-1">JPG, PNG or GIF. Max 5MB.</p>
                        </div>
                    </div>
                </div>

                <div>
                    <label class="block text-sm font-medium mb-2">Full Name</label>
                    <input type="text" name="full_name" placeholder="John Doe" class="w-full p-3 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800">
                </div>

                <div>
                    <label class="block text-sm font-medium mb-2">Username</label>
                    <input type="text" name="username" value="{{ user.username }}" class="w-full p-3 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800">
                </div>
                <div>
                    <label class="block text-sm font-medium mb-2">Email</label>
                    <input type="email" name="email" value="{{ user.email }}" class="w-full p-3 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800">
                </div>

                <div>
                    <label class="block text-sm font-medium mb-2">Phone Number</label>
                    <input type="tel" name="phone" placeholder="+1 (555) 123-4567" class="w-full p-3 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800">
                    <p class="text-xs text-secondary mt-1">Optional. Used for SMS notifications and two-factor authentication.</p>
                </div>

                <div>
                    <label class="block text-sm font-medium mb-2">Job Title</label>
                    <input type="text" name="job_title" placeholder="Product Manager" class="w-full p-3 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800">
                </div>
            </div>
            
            <div style="margin-top: var(--space-6);">
                <button type="submit" class="btn btn-primary">Update Profile</button>
            </div>
        </form>
    </div>

    <div class="card" style="margin-bottom: var(--space-6);">
        <h2 class="text-xl font-semibold mb-4">Regional Settings</h2>
        <form method="POST">
            <div style="display: flex; flex-direction: column; gap: var(--space-4);">
                <div>
                    <label class="block text-sm font-medium mb-2">Timezone</label>
                    <select name="timezone" class="w-full p-3 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800">
                        <option value="America/New_York" selected>Eastern Time (ET)</option>
                        <option value="America/Chicago">Central Time (CT)</option>
                        <option value="America/Denver">Mountain Time (MT)</option>
                        <option value="America/Los_Angeles">Pacific Time (PT)</option>
                        <option value="Europe/London">London (GMT)</option>
                        <option value="Europe/Paris">Paris (CET)</option>
                        <option value="Asia/Tokyo">Tokyo (JST)</option>
                        <option value="Asia/Shanghai">Shanghai (CST)</option>
                        <option value="Australia/Sydney">Sydney (AEDT)</option>
                    </select>
                    <p class="text-xs text-secondary mt-1">Used for scheduling meetings and displaying timestamps</p>
                </div>

                <div>
                    <label class="block text-sm font-medium mb-2">Language</label>
                    <select name="language" class="w-full p-3 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800">
                        <option value="en" selected>English</option>
                        <option value="es">Español</option>
                        <option value="fr">Français</option>
                        <option value="de">Deutsch</option>
                        <option value="zh">中文</option>
                        <option value="ja">日本語</option>
                        <option value="pt">Português</option>
                    </select>
                    <p class="text-xs text-secondary mt-1">Interface language (transcription language set in Preferences)</p>
                </div>

                <div>
                    <label class="block text-sm font-medium mb-2">Date Format</label>
                    <select name="date_format" class="w-full p-3 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800">
                        <option value="MM/DD/YYYY" selected>MM/DD/YYYY (12/31/2025)</option>
                        <option value="DD/MM/YYYY">DD/MM/YYYY (31/12/2025)</option>
                        <option value="YYYY-MM-DD">YYYY-MM-DD (2025-12-31)</option>
                    </select>
                </div>

                <div>
                    <label class="block text-sm font-medium mb-2">Time Format</label>
                    <select name="time_format" class="w-full p-3 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800">
                        <option value="12h" selected>12-hour (2:30 PM)</option>
                        <option value="24h">24-hour (14:30)</option>
                    </select>
                </div>
            </div>
            
            <div style="margin-top: var(--space-6);">
                <button type="submit" class="btn btn-primary">Save Settings</button>
            </div>
        </form>
    </div>

    <div class="card" style="margin-bottom: var(--space-6);">
        <h2 class="text-xl font-semibold mb-4">Security</h2>
        <div style="display: flex; flex-direction: column; gap: var(--space-5);">
            <div style="display: flex; justify-content: space-between; align-items: center; padding-bottom: var(--space-4); border-bottom: 1px solid var(--color-border);">
                <div>
                    <p class="font-medium">Two-Factor Authentication</p>
                    <p class="text-sm text-secondary">Add an extra layer of security to your account</p>
                </div>
                <button class="btn btn-sm btn-primary">Enable</button>
            </div>

            <div style="display: flex; justify-content: space-between; align-items: center; padding-bottom: var(--space-4); border-bottom: 1px solid var(--color-border);">
                <div>
                    <p class="font-medium">Active Sessions</p>
                    <p class="text-sm text-secondary">Manage your active login sessions</p>
                </div>
                <button class="btn btn-sm btn-ghost">View Sessions</button>
            </div>

            <div style="display: flex; justify-content: space-between; align-items: center;">
                <div>
                    <p class="font-medium">Login History</p>
                    <p class="text-sm text-secondary">Review your recent login activity</p>
                </div>
                <button class="btn btn-sm btn-ghost">View History</button>
            </div>
        </div>
    </div>

    <div class="card" style="margin-bottom: var(--space-6);">
        <h2 class="text-xl font-semibold mb-4">Change Password</h2>
        <form method="POST" action="{{ url_for('auth.change_password') }}">
            <div style="display: flex; flex-direction: column; gap: var(--space-4);">
                <div>
                    <label class="block text-sm font-medium mb-2">Current Password</label>
                    <input type="password" name="current_password" class="w-full p-3 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800">
                </div>
                <div>
                    <label class="block text-sm font-medium mb-2">New Password</label>
                    <input type="password" name="new_password" class="w-full p-3 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800">
                    <p class="text-xs text-secondary mt-1">Must be at least 8 characters with a mix of letters, numbers, and symbols</p>
                </div>
                <div>
                    <label class="block text-sm font-medium mb-2">Confirm New Password</label>
                    <input type="password" name="confirm_password" class="w-full p-3 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800">
                </div>
            </div>
            
            <div style="margin-top: var(--space-6);">
                <button type="submit" class="btn btn-primary">Change Password</button>
            </div>
        </form>
    </div>

    <div class="card" style="border-color: var(--color-error);">
        <h2 class="text-xl font-semibold mb-4" style="color: var(--color-error);">Danger Zone</h2>
        <div style="display: flex; flex-direction: column; gap: var(--space-5);">
            <div style="display: flex; justify-content: space-between; align-items: center; padding-bottom: var(--space-4); border-bottom: 1px solid var(--color-border);">
                <div>
                    <p class="font-medium">Export Your Data</p>
                    <p class="text-sm text-secondary">Download all your meetings, transcripts, and settings</p>
                </div>
                <button class="btn btn-sm btn-ghost">Export Data</button>
            </div>

            <div style="display: flex; justify-content: space-between; align-items: center;">
                <div>
                    <p class="font-medium" style="color: var(--color-error);">Delete Account</p>
                    <p class="text-sm text-secondary">Permanently delete your account and all associated data</p>
                </div>
                <button class="btn btn-sm" style="background: var(--color-error); color: white;">Delete Account</button>
            </div>
        </div>
    </div>
    </div>
</div>
{% endblock %}
