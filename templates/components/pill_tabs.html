{# MINA PILL TABS COMPONENT #}
{# Reusable horizontal scrollable pill-shaped navigation #}
{# 
  Usage:
  {% include 'components/pill_tabs.html' with {
    tabs: [
      {'id': 'summary', 'label': 'Summary', 'icon': 'file-text', 'active': True},
      {'id': 'conversation', 'label': 'Conversation', 'icon': 'message-circle'},
      {'id': 'ai-chat', 'label': 'AI Chat', 'icon': 'cpu', 'badge': True},
      {'id': 'takeaways', 'label': 'Takeaways', 'icon': 'check-circle'}
    ],
    container_class: 'compact',
    data_target: 'meeting-tabs'
  } %}
#}

{% set tabs = tabs|default([
  {'id': 'summary', 'label': 'Summary', 'icon': 'file-text', 'active': True},
  {'id': 'conversation', 'label': 'Conversation', 'icon': 'message-circle'},
  {'id': 'ai-chat', 'label': 'AI Chat', 'icon': 'cpu'},
  {'id': 'takeaways', 'label': 'Takeaways', 'icon': 'check-circle'}
]) %}

{% set container_class = container_class|default('') %}
{% set data_target = data_target|default('pill-tabs') %}

<nav class="mina-pill-tabs {{ container_class }}" 
     role="navigation" 
     aria-label="Content navigation"
     data-pill-tabs="{{ data_target }}">
  
  <div class="mina-pill-tabs-wrapper" data-pill-tabs-wrapper>
    <div class="mina-pill-tabs-scroll" 
         role="tablist" 
         data-pill-tabs-scroll>
      
      {% for tab in tabs %}
        <a href="#{{ tab.id }}" 
           class="mina-pill-tab {% if tab.active %}active{% endif %} {% if tab.badge %}mina-pill-tab-badge{% endif %}"
           role="tab"
           aria-selected="{% if tab.active %}true{% else %}false{% endif %}"
           aria-controls="{{ tab.id }}-panel"
           data-pill-tab="{{ tab.id }}"
           tabindex="{% if tab.active %}0{% else %}-1{% endif %}">
          
          {# Icon (optional) #}
          {% if tab.icon %}
            <i data-feather="{{ tab.icon }}" aria-hidden="true"></i>
          {% endif %}
          
          {# Label #}
          <span class="mina-pill-tab-label">{{ tab.label }}</span>
        </a>
      {% endfor %}
      
    </div>
  </div>
</nav>

{# Initialize Feather icons for this component #}
<script nonce="{{ g.csp_nonce }}">
(function() {
  // Initialize Feather icons within pill tabs
  if (typeof feather !== 'undefined') {
    const pillTabsContainer = document.querySelector('[data-pill-tabs="{{ data_target }}"]');
    if (pillTabsContainer) {
      feather.replace({ 
        'stroke-width': 2.5, 
        'width': 16, 
        'height': 16 
      });
    }
  }
})();
</script>
