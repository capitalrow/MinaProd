{% extends "base_clean.html" %}

{% block title %}Live Transcription - Mina{% endblock %}

{% block head %}
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
<link href="/static/css/professional_ui.css" rel="stylesheet">
{% endblock %}

{% block content %}
<div class="app-container">
    <!-- Header -->
    <header class="app-header">
        <div class="header-content">
            <h1 class="app-title">
                <i class="fas fa-microphone-alt"></i>
                Live Transcription
            </h1>
            <div class="connection-status">
                <span class="status-dot ready" id="statusDot"></span>
                <span class="status-text" id="statusText">Ready</span>
            </div>
        </div>
    </header>

    <!-- Main Content Grid -->
    <div class="main-grid">
        
        <!-- Control Panel -->
        <aside class="control-panel">
            <div class="panel-section">
                <h3 class="section-title">Recording</h3>
                
                <div class="record-controls">
                    <button class="record-btn" id="recordButton">
                        <i class="fas fa-microphone"></i>
                    </button>
                    
                    <div class="control-buttons">
                        <button class="btn btn-secondary" id="pauseButton" disabled>
                            <i class="fas fa-pause"></i>
                        </button>
                        <button class="btn btn-outline" id="stopButton" disabled>
                            <i class="fas fa-stop"></i>
                        </button>
                    </div>
                </div>

                <div class="audio-meter">
                    <label class="meter-label">Audio Level</label>
                    <div class="level-bar">
                        <div class="level-fill" id="audioLevel"></div>
                    </div>
                </div>
            </div>

            <div class="panel-section">
                <h3 class="section-title">Session Stats</h3>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="sessionTime">00:00</div>
                        <div class="stat-label">Duration</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-value" id="wordCount">0</div>
                        <div class="stat-label">Words</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-value" id="confidenceScore">0%</div>
                        <div class="stat-label">Accuracy</div>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Transcript Area -->
        <main class="transcript-area">
            <div class="transcript-header">
                <h3 class="transcript-title">Live Transcript</h3>
                
                <div class="transcript-actions">
                    <button class="btn btn-icon" id="clearTranscript" title="Clear">
                        <i class="fas fa-trash"></i>
                    </button>
                    <button class="btn btn-icon" id="copyTranscript" title="Copy">
                        <i class="fas fa-copy"></i>
                    </button>
                    <button class="btn btn-icon" id="downloadTranscript" title="Download">
                        <i class="fas fa-download"></i>
                    </button>
                </div>
            </div>

            <div class="transcript-content" id="transcriptContainer">
                <div class="transcript-empty">
                    <i class="fas fa-microphone-slash"></i>
                    <p>Click record to start transcription</p>
                </div>
            </div>

            <div class="confidence-indicator">
                <div class="confidence-label">
                    <span>Confidence</span>
                    <span id="confidenceText">0%</span>
                </div>
                <div class="confidence-bar">
                    <div class="confidence-fill" id="confidenceFill"></div>
                </div>
            </div>
        </main>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="/static/js/fixed_transcription.js"></script>
<script>
// Initialize FIXED system with enhanced compatibility
document.addEventListener('DOMContentLoaded', function() {
    console.log('ðŸš€ Loading FIXED Mina Transcription System...');
    // The fixed system self-initializes with enhanced error handling
});
</script>
{% endblock %}
